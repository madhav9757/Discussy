/*
  Header.css

  This file defines the styling for the Header component, implementing a modern, clean,
  and responsive design based on the provided principles.

  Principles applied:
  - Flexbox for layout control.
  - CSS Variables for theme management (light/dark mode).
  - Minimalistic design with subtle shadows and transitions.
  - Responsive design using media queries for mobile-first approach.
  - Semantic class names for clarity.
  - Emphasis on accessibility with focus states and aria attributes (handled in JSX).
*/

/* ===================================== */
/* 1. Base Styles & Global Variables     */
/* ===================================== */

/* Root variables for theme management */
:root {
    --header-height: 60px;
    /* Standard header height */
    --padding-inline: 20px;
    /* Horizontal padding for header container */

    /* Light Theme Colors */
    --color-primary: #3b82f6;
    /* Blue-500 */
    --color-primary-dark: #2563eb;
    /* Blue-600 */
    --color-text-primary: #1f2937;
    /* Gray-900 */
    --color-text-secondary: #4b5563;
    /* Gray-700 */
    --color-background: #ffffff;
    --color-surface: #f9fafb;
    /* Gray-50 */
    --color-border: #e5e7eb;
    /* Gray-200 */
    --color-shadow: rgba(0, 0, 0, 0.05);
    /* Subtle shadow */
    --color-hover-bg: #f3f4f6;
    /* Gray-100 */
    --color-active-bg: #e5e7eb;
    /* Gray-200 */
    --color-notification-badge: #ef4444;
    /* Red-500 */
    --color-unread-dot: #3b82f6;
    /* Primary blue for unread dot */
    --color-danger: #ef4444;
    /* Red-500 */
    --color-danger-hover: #dc2626;
    /* Red-600 */
}

/* Dark Theme Colors (applied when data-theme="dark") */
[data-theme="dark"] {
    --color-primary: #60a5fa;
    /* Blue-400 */
    --color-primary-dark: #3b82f6;
    /* Blue-500 */
    --color-text-primary: #e5e7eb;
    /* Gray-200 */
    --color-text-secondary: #9ca3af;
    /* Gray-400 */
    --color-background: #111827;
    /* Gray-900 */
    --color-surface: #1f2937;
    /* Gray-800 */
    --color-border: #374151;
    /* Gray-700 */
    --color-shadow: rgba(0, 0, 0, 0.3);
    /* More prominent shadow in dark mode */
    --color-hover-bg: #374151;
    /* Gray-700 */
    --color-active-bg: #4b5563;
    /* Gray-600 */
    --color-notification-badge: #dc2626;
    /* Red-600 */
    --color-unread-dot: #60a5fa;
    /* Primary blue for unread dot */
    --color-danger: #ef4444;
    /* Red-500 */
    --color-danger-hover: #dc2626;
    /* Red-600 */
}

/* Base styles for HTML elements for consistency */
body {
    margin: 0;
    font-family: 'Inter', sans-serif;
    /* Recommended modern sans-serif font */
    background-color: var(--color-background);
    color: var(--color-text-primary);
    transition: background-color 0.3s ease, color 0.3s ease;
}

a {
    color: inherit;
    /* Inherit color from parent by default */
    text-decoration: none;
}

button {
    background: none;
    border: none;
    padding: 0;
    cursor: pointer;
    color: inherit;
    font-family: inherit;
}

ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

/* ===================================== */
/* 2. Header Main Container            */
/* ===================================== */

.header-main {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    background-color: var(--color-background);
    border-bottom: 1px solid var(--color-border);
    z-index: 1000;
    transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
    box-shadow: none;
    /* No shadow by default */
}

.header-main.scrolled {
    backdrop-filter: blur(12px);
    background-color: rgba(255, 255, 255, 0.75);
}

[data-theme="dark"] .header-main.scrolled {
    background-color: rgba(17, 24, 39, 0.75);
}

/* When search is active on mobile, hide overflow to prevent scroll issues */
.header-main.search-active {
    overflow: hidden;
}

.header-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: var(--header-height);
    padding: 0 var(--padding-inline);
    max-width: 1400px;
    /* Max width for content */
    margin: 0 auto;
    /* Center the header content */
    position: relative;
    /* For search overlay positioning */
}

/* ===================================== */
/* 3. Logo Section                     */
/* ===================================== */

.header-logo-section {
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: 700;
    font-size: 1.25rem;
    /* 20px */
    color: var(--color-primary);
    flex-shrink: 0;
    /* Prevent logo from shrinking */
    padding: 8px 0;
    /* Add some padding for touch target on mobile */
}

.header-logo-icon {
    width: 24px;
    height: 24px;
}

/* Hide logo text on small screens */
.header-logo-text {
    display: block;
}

/* ===================================== */
/* 4. Desktop Navigation               */
/* ===================================== */

.header-nav {
    display: flex;
    align-items: center;
    gap: 24px;
    /* Space between nav links */
    margin-left: 32px;
    /* Space from logo */
}

.header-nav-link {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 0;
    position: relative;
    font-weight: 500;
    color: var(--color-text-secondary);
    transition: color 0.2s ease;
}

.header-nav-link::after {
    content: "";
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 100%;
    height: 2px;
    background: linear-gradient(to right, var(--color-primary), #3b82f6);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.3s ease;
}

.header-nav-link:hover::after {
    transform: scaleX(1);
}

.header-nav-link.active {
    color: var(--color-primary);
    font-weight: 600;
}

/* Active indicator for navigation links */
.nav-indicator {
    position: absolute;
    bottom: -1px;
    /* Position it on the bottom border */
    left: 0;
    right: 0;
    height: 2px;
    background-color: var(--color-primary);
    border-radius: 9999px;
    /* Pill shape */
}


/* ===================================== */
/* 5. Smart Search Bar                 */
/* ===================================== */

.header-search {
    flex-grow: 1;
    /* Allows search to take available space */
    max-width: 500px;
    /* Max width for desktop search */
    margin: 0 20px;
    position: relative;
    /* For dropdown positioning */
}

.header-search-input-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    background-color: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: 8px;
    padding: 8px 12px;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.header-search-input-wrapper:focus-within {
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-primary) 25%, transparent);
    /* Focus ring */
}

.header-search-icon {
    color: var(--color-text-secondary);
    margin-right: 8px;
    flex-shrink: 0;
}

.header-search input[type="text"] {
    flex-grow: 1;
    border: none;
    background: transparent;
    font-size: 0.9375rem;
    /* 15px */
    color: var(--color-text-primary);
    padding: 0;
    /* Remove default input padding */
    outline: none;
    /* Remove default focus outline */
}

.header-search input::placeholder {
    color: var(--color-text-secondary);
}

.header-search-shortcut {
    font-size: 0.75rem;
    /* 12px */
    background-color: var(--color-hover-bg);
    border: 1px solid var(--color-border);
    border-radius: 4px;
    padding: 2px 6px;
    margin-left: 10px;
    color: var(--color-text-secondary);
    flex-shrink: 0;
}

.search-clear-button {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background-color: var(--color-active-bg);
    color: var(--color-text-secondary);
    margin-left: 8px;
    transition: background-color 0.2s ease;
    flex-shrink: 0;
}

.search-clear-button:hover {
    background-color: var(--color-border);
}


/* ===================================== */
/* 6. Desktop Actions (Right Side)     */
/* ===================================== */

.header-actions {
    display: flex;
    align-items: center;
    gap: 16px;
    flex-shrink: 0;
    margin-left: auto;
}

.action-button-wrapper {
    position: relative;
    display: flex;
}

.action-button {
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    background-color: transparent;
    color: var(--color-text-secondary);
    transition: background-color 0.2s ease, color 0.2s ease;
    position: relative;
}

.action-button:hover {
    background-color: var(--color-hover-bg);
    color: var(--color-text-primary);
}

.action-button.active {
    background-color: var(--color-active-bg);
    color: var(--color-text-primary);
}

.action-button .header-icon {
    width: 20px;
    height: 20px;
}

.notification-badge {
    position: absolute;
    top: 2px;
    right: 9px;
    background-color: var(--color-notification-badge);
    color: white;
    border-radius: 50%;
    padding: 2px 6px;
    font-size: 0.6875rem;
    /* 11px */
    font-weight: 600;
    min-width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-sizing: border-box;
    border: 2px solid var(--color-background);
}

.new-post-button {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 10px 16px;
    background-color: var(--color-primary);
    color: white;
    border-radius: 8px;
    font-weight: 500;
    transition: background-color 0.2s ease, transform 0.2s ease;
    flex-shrink: 0;
}

.new-post-button:hover {
    background-color: var(--color-primary-dark);
    transform: translateY(-1px);
}

.new-post-button .header-icon {
    width: 20px;
    height: 20px;
}

/* User Profile Toggle */
.user-toggle {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px 10px;
    /* Slightly more padding for the user button */
    height: 40px;
    /* Match height of other action buttons */
    width: auto;
    /* Allow width to adapt to username */
    border-radius: 8px;
    background-color: var(--color-surface);
    /* Distinct background */
    color: var(--color-text-primary);
    transition: background-color 0.2s ease;
}

.user-toggle:hover {
    background-color: var(--color-hover-bg);
}

.user-toggle.active {
    background-color: var(--color-active-bg);
}

.header-avatar {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    object-fit: cover;
}

.header-username {
    font-weight: 500;
    font-size: 0.9375rem;
    /* 15px */
}

.header-chevron {
    color: var(--color-text-secondary);
    transition: transform 0.2s ease;
}

.header-chevron--open {
    transform: rotate(180deg);
}

/* Auth buttons (Login/Sign Up) */
.header-auth-buttons {
    display: flex;
    align-items: center;
    gap: 10px;
}

.auth-link {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 12px;
    border-radius: 6px;
    color: var(--color-text-secondary);
    font-weight: 500;
    transition: background-color 0.2s ease, color 0.2s ease;
}

.auth-link:hover {
    background-color: var(--color-hover-bg);
    color: var(--color-text-primary);
}

.auth-register-button {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 12px;
    background-color: var(--color-primary);
    color: white;
    border-radius: 6px;
    font-weight: 500;
    transition: background-color 0.2s ease;
}

.auth-register-button:hover {
    background-color: var(--color-primary-dark);
}

/* Theme Toggle (Desktop specific) */
.theme-toggle-desktop {
    display: flex;
    /* Hide by default on mobile */
}

/* ===================================== */
/* 7. Dropdown Menus (User, Notifications, Search Suggestions) */
/* ===================================== */

.header-dropdown {
    position: absolute;
    top: calc(var(--header-height) - 10px);
    /* Position slightly above bottom of header for better UX */
    right: 0;
    /* Default position for right-aligned dropdowns */
    background-color: var(--color-background);
    border: 1px solid var(--color-border);
    border-radius: 8px;
    box-shadow: 0 4px 15px var(--color-shadow);
    padding: 10px 0;
    min-width: 240px;
    max-height: calc(100vh - var(--header-height) - 20px);
    /* Max height to prevent overflow */
    overflow-y: auto;
    /* Enable scrolling for long lists */
    transform-origin: top right;
    z-index: 1050;
    /* Above header */
}

/* Specific adjustments for search dropdown */
.header-dropdown.search-dropdown {
    left: 0;
    /* Align with search input */
    right: auto;
    width: 100%;
    top: calc(100% + 5px);
    /* Position below the search input */
    transform-origin: top center;
    padding: 0;
    /* Remove internal padding, sections handle it */
}


.dropdown-section {
    padding: 8px 16px;
    border-bottom: 1px solid var(--color-border);
}

.dropdown-section:last-child {
    border-bottom: none;
}

.dropdown-section h4 {
    font-size: 0.8125rem;
    /* 13px */
    color: var(--color-text-secondary);
    margin: 0 0 8px 0;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.dropdown-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 12px;
    border-radius: 6px;
    color: var(--color-text-primary);
    font-size: 0.9375rem;
    /* 15px */
    transition: background-color 0.2s ease;
    white-space: nowrap;
    /* Prevent text wrapping */
}

.dropdown-item:hover {
    background-color: var(--color-hover-bg);
}

.dropdown-item .header-icon {
    color: var(--color-text-secondary);
    width: 16px;
    height: 16px;
}

.dropdown-item--danger {
    color: var(--color-danger);
}

.dropdown-item--danger .header-icon {
    color: var(--color-danger);
}

.dropdown-item--danger:hover {
    background-color: var(--color-danger-hover);
    color: white;
}

.dropdown-item--danger:hover .header-icon {
    color: white;
}

/* User Dropdown Specifics */
.user-dropdown-header {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    border-bottom: 1px solid var(--color-border);
}

.user-dropdown-header .header-avatar {
    width: 40px;
    height: 40px;
}

.user-dropdown-name {
    font-weight: 600;
    margin: 0;
    color: var(--color-text-primary);
}

.user-dropdown-email {
    font-size: 0.8125rem;
    /* 13px */
    color: var(--color-text-secondary);
    margin: 2px 0 0 0;
}

/* Notification Dropdown Specifics */
.notifications-dropdown {
    min-width: 300px;
    max-width: 380px;
    /* Allow wider for notification content */
    right: 0;
    left: auto;
    /* Ensure it stays right-aligned */
    transform-origin: top right;
    padding: 0;
    /* Remove default padding for internal sections */
}

.notifications-dropdown-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    border-bottom: 1px solid var(--color-border);
}

.notifications-dropdown-header h3 {
    margin: 0;
    font-size: 1.125rem;
    /* 18px */
    color: var(--color-text-primary);
}

.notifications-dropdown-mark-all {
    font-size: 0.875rem;
    /* 14px */
    color: var(--color-primary);
    font-weight: 500;
    padding: 4px 8px;
    border-radius: 4px;
    transition: background-color 0.2s ease;
}

.notifications-dropdown-mark-all:hover {
    background-color: var(--color-hover-bg);
}

.notifications-dropdown-list {
    max-height: 300px;
    /* Max height for scrollable list */
    overflow-y: auto;
    padding: 0;
}

.notification-item {
    display: flex;
    align-items: flex-start;
    /* Align avatar and text */
    gap: 12px;
    padding: 12px 16px;
    border-bottom: 1px solid var(--color-border);
    transition: background-color 0.2s ease;
    position: relative;
}

.notification-item:last-child {
    border-bottom: none;
}

.notification-item:hover {
    background-color: var(--color-hover-bg);
}

.notification-item--unread {
    background-color: color-mix(in srgb, var(--color-primary) 5%, transparent);
    /* Light background for unread */
    font-weight: 500;
}

.notification-item-avatar {
    position: relative;
    flex-shrink: 0;
}

.notification-item-avatar img {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    object-fit: cover;
}

.notification-item-type {
    position: absolute;
    bottom: -2px;
    right: -2px;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid var(--color-background);
}

.notification-item-type--comment {
    background-color: #3b82f6;
    color: white;
}

/* Blue */
.notification-item-type--like {
    background-color: #ef4444;
    color: white;
}

/* Red */
.notification-item-type--system {
    background-color: #f59e0b;
    color: white;
}

/* Amber */

.notification-item-type .notification-type-icon {
    width: 12px;
    height: 12px;
}

.notification-item-content {
    flex-grow: 1;
}

.notification-item-message {
    margin: 0;
    font-size: 0.9375rem;
    /* 15px */
    color: var(--color-text-primary);
    line-height: 1.4;
}

.notification-item-time {
    font-size: 0.75rem;
    /* 12px */
    color: var(--color-text-secondary);
    margin-top: 4px;
    display: block;
}

.notification-item-unread-dot {
    width: 8px;
    height: 8px;
    background-color: var(--color-unread-dot);
    border-radius: 50%;
    position: absolute;
    top: 16px;
    right: 16px;
    flex-shrink: 0;
}

.notifications-dropdown-footer {
    padding: 12px 16px;
    border-top: 1px solid var(--color-border);
    text-align: center;
}

.notifications-dropdown-view-all {
    font-size: 0.875rem;
    /* 14px */
    color: var(--color-primary);
    font-weight: 500;
    display: inline-block;
    padding: 6px 10px;
    border-radius: 4px;
    transition: background-color 0.2s ease;
}

.notifications-dropdown-view-all:hover {
    background-color: var(--color-hover-bg);
}


/* Search Suggestions specific styles */
.search-dropdown .dropdown-section {
    padding: 0;
    /* Override default section padding */
    border-bottom: none;
}

.search-dropdown .dropdown-section h4 {
    padding: 10px 16px 8px;
    margin-bottom: 0;
    /* Remove margin below h4 */
    background-color: var(--color-surface);
    /* Slightly different background for header */
    border-bottom: 1px solid var(--color-border);
}

.search-dropdown .dropdown-section ul {
    padding: 8px 0;
    /* Padding for the list itself */
}

.search-dropdown .dropdown-section li {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 16px;
    font-size: 0.9375rem;
    /* 15px */
    cursor: pointer;
    transition: background-color 0.2s ease;
}

.search-dropdown .dropdown-section li:hover {
    background-color: var(--color-hover-bg);
}

.search-dropdown .dropdown-section li .header-icon {
    color: var(--color-text-secondary);
    width: 16px;
    height: 16px;
}

.search-dropdown .dropdown-section.no-results {
    padding: 16px;
    text-align: center;
    color: var(--color-text-secondary);
}


/* ===================================== */
/* 8. Mobile Toggles & Menu            */
/* ===================================== */

.header-mobile-toggles {
    display: none;
    /* Hidden by default on desktop */
    align-items: center;
    gap: 10px;
}

/* Hamburger Menu Button */
.mobile-menu-button {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    width: 24px;
    height: 18px;
    background: none;
    border: none;
    padding: 0;
    cursor: pointer;
    z-index: 1100;
    /* Ensure it's above other mobile elements */
    flex-shrink: 0;
    position: relative;
    /* For animation origin */
}

.mobile-menu-button-line {
    display: block;
    width: 100%;
    height: 2px;
    background-color: var(--color-text-primary);
    border-radius: 2px;
    transition: transform 0.3s ease, opacity 0.3s ease;
}

.mobile-menu-button.open .mobile-menu-button-line:nth-child(1) {
    transform: translateY(8px) rotate(45deg);
}

.mobile-menu-button.open .mobile-menu-button-line:nth-child(2) {
    opacity: 0;
}

.mobile-menu-button.open .mobile-menu-button-line:nth-child(3) {
    transform: translateY(-8px) rotate(-45deg);
}

/* Mobile Menu Sidebar */
.mobile-menu-sidebar {
    position: fixed;
    top: auto;
    right: 0;
    width: 100%;
    max-width: 320px;
    height: auto;
    background-color: var(--color-background);
    border-left: 1px solid var(--color-border);
    box-shadow: -4px 0 15px var(--color-shadow);
    z-index: 999;
    display: flex;
    flex-direction: column;
    padding: 20px;
    box-sizing: border-box;
    overflow-y: auto;
}

.mobile-menu-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: 20px;
    border-bottom: 1px solid var(--color-border);
    margin-bottom: 20px;
}

.mobile-menu-header .header-logo-text {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--color-text-primary);
}

.close-mobile-menu-button {
    color: var(--color-text-secondary);
    width: 40px;
    height: 40px;
    border-radius: 8px;
}

.close-mobile-menu-button:hover {
    background-color: var(--color-hover-bg);
}


.mobile-nav-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.mobile-nav-link {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    border-radius: 8px;
    font-size: 1.125rem;
    /* 18px */
    font-weight: 500;
    color: var(--color-text-primary);
    transition: background-color 0.2s ease;
}

.mobile-nav-link:hover {
    background-color: var(--color-hover-bg);
}

.mobile-nav-link.active {
    background-color: var(--color-active-bg);
    color: var(--color-primary);
}

.mobile-nav-link .header-icon {
    width: 22px;
    height: 22px;
    color: var(--color-text-secondary);
    /* Default icon color */
}

.mobile-nav-link.active .header-icon {
    color: var(--color-primary);
    /* Active icon color */
}


.mobile-menu-footer {
    padding-top: 20px;
    border-top: 1px solid var(--color-border);
    margin-top: 20px;
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.theme-toggle-mobile-wrapper {
    display: flex;
    justify-content: space-around;
    align-items: center;
    padding: 8px 0;
}

.theme-toggle-label {
    font-size: 1.125rem;
    font-weight: 500;
    color: var(--color-text-primary);
}

.theme-toggle-mobile {
    width: auto;
    height: auto;
    border-radius: 8px;
    color: var(--color-text-secondary);
}

.mobile-auth-buttons {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.mobile-auth-link {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    border-radius: 8px;
    font-size: 1.125rem;
    font-weight: 500;
    color: var(--color-text-primary);
    background-color: var(--color-surface);
    transition: background-color 0.2s ease;
}

.mobile-auth-link:hover {
    background-color: var(--color-hover-bg);
}

.mobile-auth-link .header-icon {
    color: var(--color-text-secondary);
}

.mobile-auth-register-button {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    border-radius: 8px;
    font-size: 1.125rem;
    font-weight: 500;
    background-color: var(--color-primary);
    color: white;
    transition: background-color 0.2s ease;
}

.mobile-auth-register-button:hover {
    background-color: var(--color-primary-dark);
}

.mobile-logout-button-wrapper {
    width: 100%;
}

.mobile-logout-button {
    width: 100%;
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    border-radius: 8px;
    font-size: 1.125rem;
    font-weight: 500;
    color: var(--color-danger);
    background-color: var(--color-surface);
    transition: background-color 0.2s ease;
    justify-content: flex-start;
    /* Align text to start */
}

.mobile-logout-button .header-icon {
    color: var(--color-danger);
}

.mobile-logout-button:hover {
    background-color: var(--color-danger-hover);
    color: white;
}

.mobile-logout-button:hover .header-icon {
    color: white;
}


/* ===================================== */
/* 9. Responsive Adjustments           */
/* ===================================== */

/* Small screens (e.g., up to 768px, typical tablet portrait/mobile landscape) */
@media (max-width: 768px) {
    .header-logo-text {
        display: none;
        /* Hide logo text on small screens */
    }

    .header-nav,
    .header-actions {
        display: none;
        /* Hide desktop nav and actions */
    }

    .header-mobile-toggles {
        display: flex;
        /* Show mobile toggles */
    }

    .header-search {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: var(--header-height);
        /* Keep search input visible in header normally */
        margin: 0;
        padding: 0 var(--padding-inline);
        background-color: var(--color-background);
        box-sizing: border-box;
        transition: transform 0.3s ease, opacity 0.3s ease;
        z-index: 900;
        /* Below toggles, above main header content */
        display: flex;
        /* Ensure flex for input wrapper */
        align-items: center;
    }

    .header-search-input-wrapper {
        flex-grow: 1;
        /* Allow input wrapper to take full width */
    }

    .header-search-shortcut {
        display: none;
        /* Hide shortcut on mobile */
    }

    /* Full-screen search overlay for mobile */
    .header-main.search-active .header-search {
        position: fixed;
        /* Make it fixed to overlay */
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        /* Full screen height */
        background-color: var(--color-background);
        display: flex;
        flex-direction: column;
        /* Stack input and suggestions */
        align-items: flex-start;
        padding: 20px;
        /* More padding for full screen */
        box-sizing: border-box;
        transform: translateY(0%);
        /* Ensure it's visible */
        opacity: 1;
        z-index: 1001;
        /* Above mobile menu */
    }

    .header-main.search-active .header-search .header-search-input-wrapper {
        width: 100%;
        margin-bottom: 15px;
        /* Space between input and suggestions */
        padding: 12px 16px;
        /* Larger padding for search input */
    }

    .header-main.search-active .header-search input[type="text"] {
        font-size: 1.125rem;
        /* Larger font for mobile search */
    }

    /* Position the mobile search icon properly when expanded */
    .header-main.search-active .header-search-icon {
        margin-right: 12px;
        width: 24px;
        height: 24px;
    }

    /* Adjust search clear button size for mobile */
    .header-main.search-active .search-clear-button {
        width: 32px;
        height: 32px;
    }


    /* Hide non-search elements when search is active */
    .header-main.search-active .header-logo-section,
    .header-main.search-active .header-mobile-toggles {
        display: none;
    }

    /* Search dropdown within the full-screen search overlay */
    .header-main.search-active .header-dropdown.search-dropdown {
        position: static;
        /* Let it flow naturally within the flex container */
        width: 100%;
        max-width: none;
        box-shadow: none;
        border: none;
        border-radius: 0;
        background: transparent;
        /* Blend with parent */
        overflow: visible;
        flex-grow: 1;
        /* Take remaining height */
    }

    .header-main.search-active .header-dropdown.search-dropdown .dropdown-section h4 {
        background-color: transparent;
        /* No distinct background for heading */
        border-bottom: none;
        padding: 10px 0 8px;
        /* Adjust padding */
    }

    .header-main.search-active .header-dropdown.search-dropdown .dropdown-section ul {
        padding: 0;
        /* Remove list padding */
    }

    .header-main.search-active .header-dropdown.search-dropdown .dropdown-section li {
        padding: 12px 0;
        /* Adjust list item padding */
        font-size: 1rem;
    }

    /* Overlay effect for mobile menu */
    .mobile-menu-sidebar.framer-visible~.header-main:not(.search-active) .header-container::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.5);
        /* Dimming overlay */
        z-index: 990;
        /* Below the sidebar but above other content */
        pointer-events: none;
        /* Allow clicks to pass through */
    }

    /* Mobile specific dropdowns for notifications */
    .notifications-dropdown.mobile-notifications-dropdown {
        top: var(--header-height);
        /* Position right below header */
        width: calc(100% - var(--padding-inline) * 2);
        /* Full width minus padding */
        left: var(--padding-inline);
        right: var(--padding-inline);
        max-width: none;
        transform-origin: top center;
    }

    /* Hide desktop theme toggle on mobile */
    .theme-toggle-desktop {
        display: none;
    }
}

/* Larger mobile devices / small tablets (e.g., 480px to 768px) */
@media (min-width: 481px) and (max-width: 768px) {
    .header-logo-section {
        margin-right: 10px;
        /* Add space between logo and search toggle */
    }
}

/* Larger screens (e.g., 769px and up) */
@media (min-width: 769px) {
    .header-mobile-toggles {
        display: none;
        /* Hide mobile toggles on desktop */
    }

    .mobile-menu-sidebar {
        display: none;
        /* Hide mobile sidebar */
    }

    .header-search.header-search--expanded {
        /* Reset any mobile-specific expansion styles */
        position: static;
        height: auto;
        padding: 0;
        flex-direction: row;
        align-items: center;
        background-color: transparent;
        box-sizing: content-box;
        transform: none;
        opacity: 1;
        z-index: auto;
    }
}

/* Adjust padding for very small screens */
@media (max-width: 400px) {
    :root {
        --padding-inline: 15px;
    }
}

/* Accessibility: Focus states */
*:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 3px;
}

/* Remove outline for elements that handle focus styling internally (like active states) */
.action-button.active:focus-visible,
.header-search-input-wrapper:focus-within,
.mobile-nav-link.active:focus-visible,
.new-post-button:focus-visible,
.auth-register-button:focus-visible,
.mobile-auth-register-button:focus-visible,
.mobile-logout-button:focus-visible {
    outline: none;
    /* Handled by specific styles */
}

/* Ensure icons have a baseline alignment */
.header-icon {
    vertical-align: middle;
}